self.proxy=(()=>{const r={};return chrome.runtime.onMessage.addListener(((e,o,n)=>(Promise.resolve().then((()=>{const{command:o,params:n}=e,t=r[o];if("function"!=typeof t)throw new Error("handler not found for command: "+o);return t(n)})).then((r=>n(r))).catch((r=>{n({errmsg:r})})),!0))),{invoke:(r,e,o)=>new Promise(((n,t)=>{chrome.tabs.sendMessage(r,{command:e,params:o},(r=>{r&&r.error?t(r.error):n(r)}))})),on:(e,o)=>{if("function"!=typeof o)throw new Error("callback should be function");r[e]=o}}})();